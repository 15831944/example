# 配置

```shell
location /pub {   
  set $push_channel_id $arg_id;   
  push_publisher;   
  push_store_messages on;   
  push_message_timeout 2h;   
  push_max_message_buffer_length 10;   
}   
location /sub {   
  push_subscriber;   
  set $push_channel_id $arg_id;   
  push_subscriber_concurrency broadcast;   
  default_type text/plain;   
}  
```

启动Nginx，使用curl进行推送测试

# subscriber请求数据：
```shell
curl -X GET http://localhost:9090/sub?id=1
```
向channel1请求数据，当前channel无数据，等待数据生成

# publisher推送数据：
```shell
curl -X POST -d "data_to_push" http://localhost:9090/pub?id=1
```
向channel1推送数据，subscriber收到数据并返回

# 网页获取消息
```javascript
// 订阅消息
funtcion sub() {
	$.ajax({
		type: "GET",
		url: "http://localhost:9090/sub?id=1",
		ifModified: true,
		success: function(data){
			alert(data);
			// 继续订阅消息
			sub();
		}
	});
}
```